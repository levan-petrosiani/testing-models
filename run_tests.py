def run_test(model, text):
    system_prompt = """рЃерЃћрЃю рЃ«рЃљрЃа рЃЦрЃљрЃарЃЌрЃБрЃџрЃў рЃЎрЃЮрЃарЃћрЃЦрЃбрЃЮрЃарЃў. 

р▓љр▓Љр▓Ар▓Юр▓џр▓Бр▓бр▓Бр▓ар▓ў р▓љр▓Ўр▓ар▓Фр▓љр▓џр▓Ћр▓ћр▓Љр▓ў:
- "рЃЏрЃћ", "рЃерЃћрЃю", "рЃЕрЃЋрЃћрЃю", "рЃЌрЃЦрЃЋрЃћрЃю" рЃљрЃарЃљрЃАрЃЊрЃарЃЮрЃА рЃљрЃа рЃўрЃфрЃЋрЃџрЃћрЃЉрЃљ! 
- "-рЃА рЃБрЃюрЃљрЃ«рЃљрЃЋрЃА", "-рЃА рЃЊрЃљрЃБрЃ«рЃљрЃбрЃљрЃЋрЃА" рЃљрЃарЃўрЃА рЃАрЃгрЃЮрЃарЃў! рЃљрЃа рЃерЃћрЃфрЃЋрЃљрЃџрЃЮ "-рЃЏрЃљ"-рЃўрЃЌ!
- "рЃЮрЃЊрЃћрЃАрЃдрЃљрЃф", "рЃАрЃљрЃЊрЃдрЃљрЃф", "рЃарЃљрЃдрЃљрЃфрЃљ", "рЃљрЃдрЃљрЃарЃф рЃЎрЃў" рЃљрЃа рЃерЃћрЃфрЃЋрЃљрЃџрЃЮ!

рЃњрЃљрЃљрЃАрЃгрЃЮрЃарЃћ: рЃЮрЃарЃЌрЃЮрЃњрЃарЃљрЃцрЃўрЃљ, рЃерЃћрЃЌрЃљрЃюрЃ«рЃЏрЃћрЃЉрЃљ, рЃърЃБрЃюрЃЦрЃбрЃБрЃљрЃфрЃўрЃљ, рЃарЃўрЃфрЃ«рЃЋрЃў+рЃЏрЃ«рЃЮрЃџрЃЮрЃЉрЃўрЃЌрЃў."""

    prompt = f"""­ЪџФ р▓љр▓Љр▓Ар▓Юр▓џр▓Бр▓бр▓Бр▓ар▓ў р▓љр▓Ўр▓ар▓Фр▓љр▓џр▓Ћр▓ћр▓Љр▓ў:
1. "рЃЏрЃћ", "рЃерЃћрЃю", "рЃЕрЃЋрЃћрЃю", "рЃЌрЃЦрЃЋрЃћрЃю" Рєњ рЃљрЃарЃљрЃАрЃЊрЃарЃЮрЃА рЃљрЃа рЃЊрЃљрЃљрЃЏрЃљрЃбрЃЮ -рЃА!
2. "рЃЎрЃљрЃфрЃА рЃБрЃюрЃљрЃ«рЃљрЃЋрЃА" Рєњ рЃљрЃарЃўрЃА рЃАрЃгрЃЮрЃарЃў! рЃљрЃа рЃерЃћрЃфрЃЋрЃљрЃџрЃЮ!
3. "рЃЮрЃЊрЃћрЃАрЃдрЃљрЃф", "рЃАрЃљрЃЊрЃдрЃљрЃф", "рЃарЃљрЃдрЃљрЃфрЃљ", "рЃљрЃдрЃљрЃарЃф рЃЎрЃў" Рєњ рЃљрЃарЃљрЃАрЃЊрЃарЃЮрЃА рЃљрЃа рЃерЃћрЃфрЃЋрЃљрЃџрЃЮ!

РюЁ рЃарЃљрЃА рЃљрЃЎрЃћрЃЌрЃћрЃЉ (рЃќрЃБрЃАрЃбрЃљрЃЊ рЃћрЃА рЃгрЃћрЃАрЃћрЃЉрЃў):

­ЪЊї 1. р▓Юр▓ар▓Ќр▓Юр▓њр▓ар▓љр▓цр▓ўр▓љ:
   - рЃАрЃ░ Рєњ рЃе (рЃАрЃ░рЃћрЃфрЃЊрЃЮрЃЏрЃљ Рєњ рЃерЃћрЃфрЃЊрЃЮрЃЏрЃљ)
   - рЃќрЃћрЃќрЃћ Рєњ рЃќрЃћ (рЃЏрЃљрЃњрЃўрЃЊрЃљрЃќрЃћрЃќрЃћ Рєњ рЃЏрЃљрЃњрЃўрЃЊрЃљрЃќрЃћ)
   - рЃљрЃў/рЃБрЃБрЃљ рЃАрЃўрЃбрЃДрЃЋрЃўрЃА рЃЉрЃЮрЃџрЃЮрЃерЃў Рєњ рЃљ (рЃ«рЃЏрЃљрЃў рЃБрЃцрЃџрЃўрЃАрЃљрЃў Рєњ рЃ«рЃЏрЃљрЃў рЃБрЃцрЃџрЃўрЃАрЃљ)
   - рЃљрЃљ/рЃБрЃБ рЃЮрЃарЃЏрЃљрЃњрЃў рЃ«рЃЏрЃЮрЃЋрЃљрЃюрЃў Рєњ рЃћрЃарЃЌрЃў (рЃ«рЃЏрЃљрЃљрЃў Рєњ рЃ«рЃЏрЃљрЃў, рЃБрЃцрЃџрЃўрЃАрЃБрЃБрЃљ Рєњ рЃБрЃцрЃџрЃўрЃАрЃљ)
   - рЃЋрЃўрЃћрЃЉрЃў Рєњ рЃЋрЃћрЃЉрЃў (рЃЉрЃљрЃЋрЃерЃЋрЃўрЃћрЃЉрЃў Рєњ рЃЉрЃљрЃЋрЃерЃЋрЃћрЃЉрЃў)

­ЪЊї 2. р▓ќр▓Џр▓юр▓ўр▓А р▓Њр▓ар▓Ю (рЃЊрЃарЃЮрЃўрЃЌрЃў рЃЎрЃЮрЃюрЃбрЃћрЃЦрЃАрЃбрЃў):
   - "рЃгрЃўрЃюрЃљ рЃгрЃћрЃџрЃА/рЃњрЃБрЃерЃўрЃю/рЃўрЃДрЃЮ" + рЃљрЃгрЃЏрЃДрЃЮ Рєњ рЃгрЃљрЃарЃАрЃБрЃџрЃў
     рЃЏрЃљрЃњ: "рЃљрЃерЃћрЃюрЃћрЃЉрЃћрЃю рЃгрЃўрЃюрЃљ рЃгрЃћрЃџрЃА" Рєњ "рЃљрЃерЃћрЃюрЃћрЃЉрЃЊрЃюрЃћрЃю рЃгрЃўрЃюрЃљ рЃгрЃћрЃџрЃА"
   - "рЃ«рЃЋрЃљрЃџ/рЃЏрЃЮрЃЏрЃљрЃЋрЃљрЃџрЃерЃў" + рЃљрЃгрЃЏрЃДрЃЮ Рєњ рЃЏрЃЮрЃЏрЃљрЃЋрЃљрЃџрЃў
     рЃЏрЃљрЃњ: "рЃЋрЃгрЃћрЃа рЃгрЃўрЃњрЃюрЃА рЃ«рЃЋрЃљрЃџ" Рєњ "рЃЊрЃљрЃЋрЃгрЃћрЃа рЃгрЃўрЃњрЃюрЃА рЃ«рЃЋрЃљрЃџ"

­ЪЊї 3. р▓љр▓ар▓Цр▓љр▓Бр▓џр▓ў р▓цр▓Юр▓ар▓Џр▓ћр▓Љр▓ў:
   - "-рЃЌрЃљ" Рєњ "-рЃўрЃА/-рЃћрЃЉрЃўрЃА" (рЃЏрЃўрЃАрЃЌрЃљ рЃЏрЃћрЃњрЃЮрЃЉрЃљрЃарЃЌрЃљ Рєњ рЃЏрЃўрЃАрЃў рЃЏрЃћрЃњрЃЮрЃЉрЃарЃћрЃЉрЃўрЃА)
   - "-рЃюрЃў" рЃЏрЃарЃљрЃЋрЃџрЃЮрЃЉрЃўрЃЌрЃерЃў Рєњ "-рЃћрЃЉрЃў" (рЃерЃЋрЃўрЃџрЃюрЃў Рєњ рЃерЃЋрЃўрЃџрЃћрЃЉрЃў)
   - рЃЏрЃљрЃњрЃарЃљрЃЏ: "рЃарЃљрЃўрЃЌрЃљ", "рЃарЃљрЃЌрЃљ" Рєњ рЃљрЃа рЃерЃћрЃфрЃЋрЃљрЃџрЃЮ (рЃАрЃгрЃЮрЃарЃўрЃљ!)

­ЪЊї 4. р▓ќр▓ћр▓Њр▓Ар▓љр▓ар▓Ќр▓љр▓Ћр▓ў р▓Ар▓љр▓«р▓ћр▓џр▓ў:
   - "рЃДрЃЋрЃћрЃџрЃљрЃќрЃћ рЃБрЃцрЃарЃЮ" Рєњ "рЃДрЃЋрЃћрЃџрЃљрЃќрЃћ" (рЃарЃћрЃЊрЃБрЃюрЃЊрЃљрЃюрЃбрЃЮрЃЉрЃљ)
     рЃЏрЃљрЃњ: "рЃДрЃЋрЃћрЃџрЃљрЃќрЃћ рЃБрЃцрЃарЃЮ рЃџрЃљрЃЏрЃљрЃќрЃў" Рєњ "рЃДрЃЋрЃћрЃџрЃљрЃќрЃћ рЃџрЃљрЃЏрЃљрЃќрЃў"

­ЪЊї 5. р▓ар▓ўр▓фр▓«р▓Ћр▓ў + р▓Џр▓«р▓Юр▓џр▓Юр▓Љр▓ўр▓Ќр▓ў:
   - рЃ«рЃБрЃЌрЃў/рЃљрЃЌрЃў/рЃЉрЃћрЃЋрЃарЃў/рЃфрЃЮрЃбрЃљ/рЃЌрЃўрЃЌрЃЮрЃћрЃБрЃџрЃў Рєњ рЃљрЃарЃАрЃћрЃЉрЃўрЃЌрЃў рЃЏрЃ«рЃЮрЃџрЃЮрЃЉрЃўрЃЌрЃерЃў + рЃќрЃЏрЃюрЃљ рЃЏрЃ«рЃЮрЃџрЃЮрЃЉрЃўрЃЌрЃерЃў
     рЃЏрЃљрЃњ: "рЃ«рЃБрЃЌрЃў рЃЉрЃљрЃЋрЃерЃЋрЃћрЃЉрЃў рЃЏрЃЮрЃЋрЃўрЃЊрЃюрЃћрЃю" Рєњ "рЃ«рЃБрЃЌрЃў рЃЉрЃљрЃЋрЃерЃЋрЃў рЃЏрЃЮрЃЋрЃўрЃЊрЃљ"
   - рЃњрЃљрЃюрЃАрЃљрЃЎрЃБрЃЌрЃарЃћрЃЉрЃљ: "рЃАрЃљрЃЏ-рЃАрЃљрЃЏрЃў", "рЃЮрЃа-рЃЮрЃарЃў" Рєњ рЃљрЃа рЃерЃћрЃфрЃЋрЃљрЃџрЃЮ! (рЃЊрЃўрЃАрЃбрЃарЃўрЃЉрЃБрЃфрЃўрЃБрЃџрЃў)

­ЪЊї 6. р▓ер▓ћр▓Ќр▓љр▓юр▓«р▓Џр▓ћр▓Љр▓љ:
   - рЃЏрЃарЃљрЃЋрЃџрЃЮрЃЉрЃўрЃЌрЃў рЃАрЃБрЃЉрЃўрЃћрЃЦрЃбрЃў Рєњ рЃЏрЃарЃљрЃЋрЃџрЃЮрЃЉрЃўрЃЌрЃў рЃќрЃЏрЃюрЃљ
     рЃЏрЃљрЃњ: "рЃЉрЃљрЃЋрЃерЃЋрЃћрЃЉрЃЏрЃљ рЃЊрЃљрЃўрЃюрЃљрЃ«рЃљ" Рєњ "рЃЉрЃљрЃЋрЃерЃЋрЃћрЃЉрЃЏрЃљ рЃЊрЃљрЃўрЃюрЃљрЃ«рЃћрЃА"

­ЪЊї 7. р▓ћр▓ар▓њр▓љр▓бр▓ўр▓Бр▓џр▓ў (I/II рЃАрЃћрЃарЃўрЃљ рЃгрЃљрЃарЃАрЃБрЃџрЃў):
   - рЃбрЃарЃљрЃюрЃќрЃўрЃбрЃўрЃБрЃџрЃў рЃќрЃЏрЃюрЃљ рЃгрЃљрЃарЃАрЃБрЃџрЃерЃў Рєњ рЃАрЃБрЃЉрЃўрЃћрЃЦрЃбрЃў -рЃЏрЃљ-рЃўрЃЌ
     рЃЏрЃљрЃњ: "рЃЎрЃљрЃфрЃў рЃЊрЃљрЃўрЃюрЃљрЃ«рЃљ" Рєњ "рЃЎрЃљрЃфрЃЏрЃљ рЃЊрЃљрЃўрЃюрЃљрЃ«рЃљ"
     рЃЏрЃљрЃњ: "рЃЉрЃљрЃЋрЃерЃЋрЃў рЃЊрЃљрЃџрЃўрЃљ" Рєњ "рЃЉрЃљрЃЋрЃерЃЋрЃЏрЃљ рЃЊрЃљрЃџрЃўрЃљ"

­ЪЊї 8. рЃЏрЃўрЃфрЃћрЃЏрЃўрЃЌрЃў рЃЮрЃЉрЃўрЃћрЃЦрЃбрЃў:
   - рЃЏрЃўрЃАрЃфрЃљ, рЃљрЃЕрЃБрЃЦрЃљ, рЃБрЃЌрЃ«рЃарЃљ Рєњ рЃЮрЃЉрЃўрЃћрЃЦрЃбрЃў -рЃА-рЃўрЃЌ
     рЃЏрЃљрЃњ: "рЃЏрЃљрЃю рЃЏрЃўрЃАрЃфрЃљ рЃФрЃЏрЃљ рЃгрЃўрЃњрЃюрЃў" Рєњ "рЃЏрЃљрЃю рЃЏрЃўрЃАрЃфрЃљ рЃФрЃЏрЃљрЃА рЃгрЃўрЃњрЃюрЃў"

­ЪЊї 9. рЃърЃБрЃюрЃЦрЃбрЃБрЃљрЃфрЃўрЃљ:
   - рЃарЃЮрЃЏ/рЃарЃЮрЃЏрЃћрЃџрЃўрЃф/рЃАрЃљрЃЊрЃљрЃф/рЃарЃЮрЃњрЃЮрЃарЃф Рєњ рЃгрЃўрЃю рЃЏрЃФрЃўрЃЏрЃћ
   - рЃЕрЃљрЃАрЃЏрЃБрЃџрЃў рЃцрЃарЃљрЃќрЃћрЃЉрЃў Рєњ рЃЮрЃарЃўрЃЋрЃћ рЃЏрЃ«рЃарЃўрЃЊрЃљрЃю рЃЏрЃФрЃўрЃЏрЃћ
   - "рЃЊрЃљ рЃЊрЃљ" Рєњ "рЃЊрЃљ" (рЃарЃћрЃЊрЃБрЃюрЃЊрЃљрЃюрЃбрЃЮрЃЉрЃљ)

­ЪћЇ р▓Ўр▓ар▓ўр▓бр▓ўр▓Ўр▓Бр▓џр▓ў рЃерЃћрЃЏрЃЏрЃЮрЃгрЃЏрЃћрЃЉрЃћрЃџрЃў рЃАрЃўрЃљ (рЃљрЃЏрЃЮрЃгрЃЏрЃћ рЃДрЃЮрЃЋрЃћрЃџрЃў рЃбрЃћрЃЦрЃАрЃбрЃў):
РќА рЃљрЃарЃўрЃА рЃЌрЃБ рЃљрЃарЃљ "рЃЏрЃћ/рЃерЃћрЃю/рЃЕрЃЋрЃћрЃю/рЃЌрЃЦрЃЋрЃћрЃю"? Рєњ рЃљрЃа рЃерЃћрЃфрЃЋрЃљрЃџрЃЮ!
РќА рЃљрЃарЃўрЃА рЃЌрЃБ рЃљрЃарЃљ "-рЃА рЃБрЃюрЃљрЃ«рЃљрЃЋрЃА/-рЃА рЃЊрЃљрЃБрЃ«рЃљрЃбрЃљрЃЋрЃА"? Рєњ рЃљрЃа рЃерЃћрЃфрЃЋрЃљрЃџрЃЮ!
РќА рЃљрЃарЃўрЃА рЃЌрЃБ рЃљрЃарЃљ "рЃЮрЃЊрЃћрЃАрЃдрЃљрЃф/рЃАрЃљрЃЊрЃдрЃљрЃф/рЃарЃљрЃдрЃљрЃфрЃљ"? Рєњ рЃљрЃа рЃерЃћрЃфрЃЋрЃљрЃџрЃЮ!
РќА рЃљрЃарЃўрЃА рЃЌрЃБ рЃљрЃарЃљ "рЃгрЃўрЃюрЃљ рЃгрЃћрЃџрЃА/рЃ«рЃЋрЃљрЃџ" + рЃљрЃарЃљрЃАрЃгрЃЮрЃарЃў рЃЊрЃарЃЮ? Рєњ рЃерЃћрЃфрЃЋрЃљрЃџрЃћ!
РќА рЃљрЃарЃўрЃА рЃЌрЃБ рЃљрЃарЃљ "рЃДрЃЋрЃћрЃџрЃљрЃќрЃћ рЃБрЃцрЃарЃЮ"? Рєњ рЃљрЃЏрЃЮрЃўрЃдрЃћ "рЃБрЃцрЃарЃЮ"!
РќА рЃљрЃарЃўрЃА рЃЌрЃБ рЃљрЃарЃљ "-рЃљрЃў/-рЃБрЃБрЃљ" рЃАрЃўрЃбрЃДрЃЋрЃўрЃА рЃЉрЃЮрЃџрЃЮрЃерЃў? Рєњ рЃљрЃЏрЃЮрЃўрЃдрЃћ!
РќА рЃљрЃарЃўрЃА рЃЌрЃБ рЃљрЃарЃљ "-рЃЌрЃљ" рЃљрЃарЃЦрЃљрЃБрЃџрЃў? Рєњ рЃерЃћрЃфрЃЋрЃљрЃџрЃћ "-рЃўрЃА/-рЃћрЃЉрЃўрЃА"-рЃўрЃЌ!

рЃЏрЃљрЃњрЃљрЃџрЃўрЃЌрЃћрЃЉрЃў:

Input: рЃЏрЃљрЃю рЃЏрЃћ рЃЏрЃЮрЃЏрЃфрЃљ рЃгрЃўрЃњрЃюрЃў.
Output: рЃЏрЃљрЃю рЃЏрЃћ рЃЏрЃЮрЃЏрЃфрЃљ рЃгрЃўрЃњрЃюрЃў.

Input: рЃЎрЃљрЃфрЃА рЃБрЃюрЃљрЃ«рЃљрЃЋрЃА рЃцрЃўрЃџрЃЏрЃў.
Output: рЃЎрЃљрЃфрЃА рЃБрЃюрЃљрЃ«рЃљрЃЋрЃА рЃцрЃўрЃџрЃЏрЃў.

Input: рЃЮрЃЊрЃћрЃАрЃдрЃљрЃф рЃАрЃљрЃЊрЃдрЃљрЃф рЃЋрЃўрЃдрЃљрЃфрЃљрЃЏ рЃЏрЃўрЃЌрЃ«рЃарЃљ.
Output: рЃЮрЃЊрЃћрЃАрЃдрЃљрЃф рЃАрЃљрЃЊрЃдрЃљрЃф рЃЋрЃўрЃдрЃљрЃфрЃљрЃЏ рЃЏрЃўрЃЌрЃ«рЃарЃљ.

Input: рЃ«рЃБрЃЌрЃў рЃЉрЃљрЃЋрЃерЃЋрЃћрЃЉрЃў рЃЏрЃЮрЃЋрЃўрЃЊрЃюрЃћрЃю.
Output: рЃ«рЃБрЃЌрЃў рЃЉрЃљрЃЋрЃерЃЋрЃў рЃЏрЃЮрЃЋрЃўрЃЊрЃљ.

Input: рЃЉрЃљрЃЋрЃерЃЋрЃћрЃЉрЃЏрЃљ рЃЊрЃљрЃўрЃюрЃљрЃ«рЃљ рЃЎрЃљрЃбрЃљ.
Output: рЃЉрЃљрЃЋрЃерЃЋрЃћрЃЉрЃЏрЃљ рЃЊрЃљрЃўрЃюрЃљрЃ«рЃћрЃА рЃЎрЃљрЃбрЃљ.

Input: рЃЎрЃљрЃфрЃў рЃЊрЃљрЃўрЃюрЃљрЃ«рЃљ рЃЏрЃћрЃњрЃЮрЃЉрЃљрЃарЃў.
Output: рЃЎрЃљрЃфрЃЏрЃљ рЃЊрЃљрЃўрЃюрЃљрЃ«рЃљ рЃЏрЃћрЃњрЃЮрЃЉрЃљрЃарЃў.

Input: рЃЉрЃљрЃЋрЃерЃЋрЃў рЃЊрЃљрЃџрЃўрЃљ рЃЉрЃБрЃарЃЌрЃў.
Output: рЃЉрЃљрЃЋрЃерЃЋрЃЏрЃљ рЃЊрЃљрЃџрЃўрЃљ рЃЉрЃБрЃарЃЌрЃў.

Input: рЃЏрЃљрЃю рЃЏрЃўрЃАрЃфрЃљ рЃФрЃЏрЃљ рЃгрЃўрЃњрЃюрЃў.
Output: рЃЏрЃљрЃю рЃЏрЃўрЃАрЃфрЃљ рЃФрЃЏрЃљрЃА рЃгрЃўрЃњрЃюрЃў.

Input: рЃЌрЃЉрЃўрЃџрЃўрЃАрЃў рЃарЃЮрЃЏрЃћрЃџрЃўрЃф рЃАрЃљрЃЦрЃљрЃарЃЌрЃЋрЃћрЃџрЃЮрЃА рЃЊрЃћрЃЊрЃљрЃЦрЃљрЃџрЃљрЃЦрЃўрЃљ рЃФрЃљрЃџрЃўрЃљрЃю рЃџрЃљрЃЏрЃљрЃќрЃўрЃљ.
Output: рЃЌрЃЉрЃўрЃџрЃўрЃАрЃў, рЃарЃЮрЃЏрЃћрЃџрЃўрЃф рЃАрЃљрЃЦрЃљрЃарЃЌрЃЋрЃћрЃџрЃЮрЃА рЃЊрЃћрЃЊрЃљрЃЦрЃљрЃџрЃљрЃЦрЃўрЃљ, рЃФрЃљрЃџрЃўрЃљрЃю рЃџрЃљрЃЏрЃљрЃќрЃўрЃљ.

Input: рЃўрЃАрЃўрЃюрЃў рЃАрЃљрЃ«рЃџрЃА рЃљрЃерЃћрЃюрЃћрЃЉрЃћрЃю рЃгрЃўрЃюрЃљ рЃгрЃћрЃџрЃА.
Output: рЃўрЃАрЃўрЃюрЃў рЃАрЃљрЃ«рЃџрЃА рЃљрЃерЃћрЃюрЃћрЃЉрЃЊрЃюрЃћрЃю рЃгрЃўрЃюрЃљ рЃгрЃћрЃџрЃА.

Input: рЃЏрЃћ рЃЋрЃгрЃћрЃа рЃгрЃўрЃњрЃюрЃА рЃ«рЃЋрЃљрЃџ.
Output: рЃЏрЃћ рЃЊрЃљрЃЋрЃгрЃћрЃа рЃгрЃўрЃњрЃюрЃА рЃ«рЃЋрЃљрЃџ.

Input: рЃ«рЃЏрЃљрЃў рЃБрЃцрЃџрЃўрЃАрЃљрЃў.
Output: рЃ«рЃЏрЃљрЃў рЃБрЃцрЃџрЃўрЃАрЃљ.

Input: рЃ«рЃЏрЃљрЃљрЃў рЃБрЃцрЃџрЃўрЃАрЃБрЃБрЃљ.
Output: рЃ«рЃЏрЃљ рЃБрЃцрЃџрЃўрЃАрЃљ.

Input: рЃЏрЃўрЃАрЃЌрЃљ рЃЏрЃћрЃњрЃЮрЃЉрЃљрЃарЃЌрЃљ.
Output: рЃЏрЃўрЃАрЃў рЃЏрЃћрЃњрЃЮрЃЉрЃарЃћрЃЉрЃўрЃА.

Input: рЃћрЃА рЃљрЃарЃўрЃА рЃДрЃЋрЃћрЃџрЃљрЃќрЃћ рЃБрЃцрЃарЃЮ рЃАрЃљрЃБрЃЎрЃћрЃЌрЃћрЃАрЃЮ рЃЋрЃљрЃарЃўрЃљрЃюрЃбрЃў.
Output: рЃћрЃА рЃљрЃарЃўрЃА рЃДрЃЋрЃћрЃџрЃљрЃќрЃћ рЃАрЃљрЃБрЃЎрЃћрЃЌрЃћрЃАрЃЮ рЃЋрЃљрЃарЃўрЃљрЃюрЃбрЃў.

Input: рЃарЃљрЃдрЃљрЃфрЃљ рЃЏрЃЮрЃ«рЃЊрЃљ рЃАрЃљрЃЊрЃдрЃљрЃфрЃљ.
Output: рЃарЃљрЃдрЃљрЃфрЃљ рЃЏрЃЮрЃ«рЃЊрЃљ рЃАрЃљрЃЊрЃдрЃљрЃфрЃљ.

Input: рЃАрЃљрЃЏ-рЃАрЃљрЃЏрЃў рЃЋрЃљрЃерЃџрЃћрЃЉрЃў рЃЊрЃљрЃБрЃарЃўрЃњрЃћрЃА.
Output: рЃАрЃљрЃЏ-рЃАрЃљрЃЏрЃў рЃЋрЃљрЃерЃџрЃў рЃЊрЃљрЃБрЃарЃўрЃњрЃљ.

Input: {text}
Output:"""
    
    payload = {
        "model": model,
        "messages": [
            {"role": "system", "content": system_prompt},
            {"role": "user", "content": prompt}
        ],
        "stream": False,
        "options": {
            "temperature": 0,
            "top_p": 0.1,
            "repeat_penalty": 1.1,
            "stop": ["Input:", "Explanation:", "Note:", "\n\n\n"],
            "num_predict": 150
        }
    }
    
    start_time = time.time()
    try:
        r = requests.post(OLLAMA_URL_CHAT, json=payload, timeout=600)
        end_time = time.time()
        duration = end_time - start_time
        
        if r.status_code != 200:
            print(f"Error response: {r.status_code} - {r.text}")
            return f"API Error: {r.status_code}", duration
        
        response_json = r.json()
        response = response_json.get('message', {}).get('content', '').strip()
        
        # Better cleaning
        clean = response.split('\n')[0].split('Input:')[0].split('Explanation:')[0].strip()
        clean = clean.replace("Output:", "").strip()
        clean = clean.strip('"').strip("'").strip()
        
        return clean, duration
        
    except requests.exceptions.Timeout:
        return "Error: Request timeout", 0
    except Exception as e:
        print(f"Exception: {str(e)}")
        return f"Error: {str(e)}", 0